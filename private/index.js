const express = require('express');
const app = express();
const server = require('http').createServer(app);
const WebSocket = require('ws');
const wss = new WebSocket.Server({server:server});

let map = '08|02|03|21|12|10|14|22|05|09|09|21|16|15|16|06|15|25|03|00,24|00|16|14|14|04|23|05|16|23|22|11|05|25|19|10|09|01|15|01,13|15|00|22|08|16|20|17|21|00|21|24|13|11|20|05|00|16|18|20,08|18|24|16|03|18|13|09|12|05|06|15|01|06|25|25|03|17|13|01,01|22|04|16|08|08|06|17|15|08|23|23|18|22|21|19|18|15|13|00,17|22|09|23|10|13|12|02|05|01|19|24|21|17|23|09|15|25|06|17,08|02|21|22|05|21|15|09|06|15|10|25|16|15|08|09|04|01|22|20,13|03|03|02|08|16|18|05|13|21|13|15|22|25|13|06|15|01|05|25,19|22|16|22|20|04|19|16|24|11|11|09|19|17|19|24|13|00|01|06,14|03|17|15|02|08|06|04|02|01|09|17|14|25|02|07|08|18|10|22,03|06|02|03|00|16|23|18|10|08|24|17|03|07|01|02|18|02|10|18,13|24|12|16|09|17|21|03|10|10|19|18|05|00|11|09|17|22|05|02,07|11|01|17|08|14|25|13|06|25|22|18|09|10|20|16|09|24|20|00,02|04|21|23|00|06|20|04|07|05|24|17|21|20|24|04|05|00|23|10,20|09|01|17|01|23|09|22|09|15|03|01|13|16|14|11|08|24|10|16,06|16|02|04|19|19|07|02|15|22|02|21|07|08|23|15|20|07|13|07,07|09|16|03|09|22|11|19|01|07|01|23|04|13|08|14|19|14|23|25,16|18|14|17|06|18|10|20|12|08|22|23|15|20|13|25|16|07|24|15,05|14|14|07|13|16|24|18|09|21|22|15|22|11|11|03|22|14|22|08,09|16|18|23|19|23|05|24|02|22|10|06|07|03|20|13|22|11|08|12'

wss.on('connection', function connection(ws){
    console.log('A new client connected');
    ws.send("MAP:"+map);
    ws.on('message', function incoming(message){
        console.log('Received: %s', message);
        ws.send('Message received %s', message)
    });

});
app.use(express.static('public'))

app.get('/',(req, res) => res.sendFile('public/index.html'));

server.listen(3000, () => console.log('Listening on port: 3000'));
